name: ci validations

on: push
jobs:
  test-localhost:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: create env files
        run: |
          mkdir -p /opt/catalyst-storage
          cat <<EOF > .env
            EMAIL=developers@decentraland.org
            CONTENT_SERVER_STORAGE=/opt/catalyst-storage
            CATALYST_URL=http://localhost
          EOF
          cat <<EOF > .env-advanced
            ETH_NETWORK=ropsten
            REGENERATE=0
          EOF
      - name: run init.sh
        run: ./init.sh
      - name: wait 10s
        run: sleep 10
      - name: run stop.sh
        run: ./stop.sh